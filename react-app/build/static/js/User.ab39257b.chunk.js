(window["webpackJsonpmy-meals-app"]=window["webpackJsonpmy-meals-app"]||[]).push([[2],{252:function(e,a,t){"use strict";var r=t(6),n=t(79),s=t(37),l=new(t(119).b.Entity)("users",{},{idAttribute:"_id"}),i={USERS:l,USERS_ARRAY:[l]},o=t(90);t.d(a,"a",function(){return c}),t.d(a,"c",function(){return u}),t.d(a,"d",function(){return m}),t.d(a,"b",function(){return d});var c=function(e){return Object(r.a)({},s.a,{types:[o.b,o.c,o.a],endpoint:"user",method:"POST",body:Object(n.a)(["userName","email","fullName","role","password"])(e||{}),meta:Object(n.a)(["onSuccess","onFailure"])(e||{})})},u=function(e){var a;return a={},Object(r.a)(a,s.a,{types:[o.h,o.i,o.g],endpoint:"users",body:Object(n.a)(["id"])(e||{}),meta:Object(n.a)(["onSuccess","onFailure"])(e||{}),schema:e.normalize?{data:i.USERS_ARRAY}:null}),Object(r.a)(a,"normalize",e.normalize),a},m=function(e){return Object(r.a)({},s.a,{types:[o.k,o.l,o.j],endpoint:"user",method:"PATCH",body:Object(n.a)(["id","userName","email","fullName","dailyCaloriesTarget","role","password"])(e||{}),meta:Object(n.a)(["onSuccess","onFailure"])(e||{})})},d=function(e){return Object(r.a)({},s.a,{types:[o.e,o.f,o.d],endpoint:"user",method:"DELETE",body:Object(n.a)(["id"])(e||{}),meta:Object(n.a)(["onSuccess","onFailure"])(e||{})})}},253:function(e,a,t){"use strict";a.a=function(e){return/^[a-zA-Z0-9]+$/.test(String(e))}},254:function(e,a,t){"use strict";a.a=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},255:function(e,a,t){"use strict";var r=t(0),n=t.n(r),s=t(26),l=t(120),i=t.n(l),o=s.b.div.withConfig({componentId:"sc-7ap35w-0"})(["width:100px;height:100px;.shadow{display:flex;justify-content:center;align-items:center;width:100%;height:100%;border-radius:50%;background:rgba(0,0,0,0.05);> span{font-size:1.5rem;}}"]);a.a=function(e){var a=e.name,t=e.className;return n.a.createElement(o,{className:t||""},n.a.createElement("div",{className:"shadow"},a?n.a.createElement("span",null,(a||"").substring(0,1).toUpperCase()):n.a.createElement(i.a,null)))}},256:function(e,a,t){"use strict";var r=t(51);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(t(0)),s=(0,r(t(61)).default)(n.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");a.default=s},257:function(e,a,t){"use strict";var r=t(51);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(t(0)),s=(0,r(t(61)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{fill:"none",d:"m0 0h24v24H0z"}),n.default.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})),"VisibilityOff");a.default=s},258:function(e,a,t){"use strict";var r=t(9),n=t(253),s=t(254);a.a=function(e){return function(a){var t=a.userName,l=a.email,i=a.role,o=a.password,c=a.confirmPassword,u=!0,m={userName:e.userName&&function(e){var a="";Object(n.a)(e)||(a="Username must be alpha-numeric [a-z, A-Z, 0-9]");e||(a="Required");return u=u&&!a,a}(t),email:e.email&&function(e){var a="";Object(s.a)(e)||(a="Email is not valid");e||(a="Required");return u=u&&!a,a}(l),role:e.role&&function(e){var a="";[r.a.Admin,r.a.Moderator,r.a.Regular].includes(e)||(a="Invalid role");e||(a="Required");return u=u&&!a,a}(i),password:e.password&&function(e){var a="";/^(?=.{8,20}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/.test(e)||(a="Password must contain [a-z, A-Z, 0-9]");return u=u&&!a,a}(o),confirmPassword:e.confirmPassword&&function(e,a){var t="";e!==a&&(t="Confirm password does not match password");return u=u&&!t,t}(o,c)};return{isValid:u,errors:m}}}},259:function(e,a,t){"use strict";var r=t(21),n=t(0),s=t.n(n),l=t(26),i=t(17),o=t(29),c=t(100),u=t(146),m=t(250),d=t(252),p=t(45),b=t(121),f=t(255),h=t(9),g=l.b.div.withConfig({componentId:"sc-12vc7f0-0"})(["position:relative;display:flex;max-width:100%;width:100%;min-height:50px;margin:10px auto;padding:8px 12px;border-radius:8px;box-shadow:0 0 7px rgba(0,0,0,0.2);.more-btns{align-self:center;> button{outline:none;border:0;background:none;cursor:pointer;}}.field{position:relative;overflow:hidden;flex:25%;margin:0 10px;white-space:nowrap;&.email{flex:33%;}span{display:block;&.field-label{margin:0 0 8px;font-weight:bold;color:rgba(0,0,0,0.8);}}}.avatar{width:50px;min-width:50px;height:50px;}@media (max-width:950px){display:block;padding:15px;.field{margin:0 0 30px;flex:unset;white-space:normal;.field-label{margin:0 0 2px;}}.more-btns{position:absolute;top:15px;right:15px;i{font-size:26px;}}.avatar{margin:0 0 35px;}}"]),v=Object(c.a)(function(){return{anchorMenuItem:{padding:0},menuAnchor:{display:"block",width:"100%",padding:"10px 0",textAlign:"center",textDecoration:"none",color:"#000"}}});a.a=Object(i.b)(null,{deleteUser:d.b,setSnackbar:p.b})(function(e){var a=e._id,t=e.className,n=e.userName,l=e.email,i=e.fullName,c=e.dailyCaloriesTarget,d=e.role,p=e.onDelete,E=e.deleteUser,O=e.setSnackbar,w=Object(b.b)(),y=v(),j=s.a.useState(!1),N=Object(r.a)(j,2),S=N[0],x=N[1],C=s.a.useState(null),k=Object(r.a)(C,2),U=k[0],P=k[1];return s.a.createElement(g,{className:t||""},s.a.createElement(f.a,{name:n,className:"avatar"}),s.a.createElement("div",{className:"userName field"},s.a.createElement("span",{className:"field-label"},"Username"),s.a.createElement("span",{className:"field-value",title:n},n)),s.a.createElement("div",{className:"email field"},s.a.createElement("span",{className:"field-label"},"Email"),s.a.createElement("span",{className:"field-value",title:l},l)),s.a.createElement("div",{className:"fullName field"},s.a.createElement("span",{className:"field-label"},"Full name"),s.a.createElement("span",{className:"field-value",title:i},i)),s.a.createElement("div",{className:"dailyCaloriesTarget field"},s.a.createElement("span",{className:"field-label"},"Exp. Calories / Day"),s.a.createElement("span",{className:"field-value",title:c},c)),s.a.createElement("div",{className:"role field"},s.a.createElement("span",{className:"field-label"},"Role"),s.a.createElement("span",{className:"field-value",title:d},d)),s.a.createElement("div",{className:"more-btns"},s.a.createElement("button",{"aria-label":"More",onClick:function(e){P(function(a){return a?null:e.currentTarget})}},s.a.createElement("i",{className:"material-icons"},"expand_more")),s.a.createElement(u.a,{id:"user-".concat(a,"-menu"),keepMounted:!0,anchorEl:U,open:!!U,onClose:function(){P(null)}},w===h.a.Admin&&s.a.createElement(m.a,{className:y.anchorMenuItem},s.a.createElement(o.b,{to:"/user/".concat(a,"/meals"),className:y.menuAnchor},"MEALS")),s.a.createElement(m.a,{className:y.anchorMenuItem},s.a.createElement(o.b,{to:"/user/".concat(a,"/edit"),className:y.menuAnchor},"EDIT")),s.a.createElement(m.a,{onClick:function(){S||(x(!0),E({id:a,onSuccess:p,onFailure:function(e){x(!1),O(e.message||"Something went wrong")}}))}},"DELETE"))))})},261:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(44),l=t(109),i=t(9),o=t(2),c=t(6),u=t(30),m=t(27),d=t(32),p=t(33),b=t(34),f=t(17),h=t(79),g=t(252),v=t(45),E=t(258),O=t(21),w=t(26),y=t(100),j=t(187),N=t(234),S=t(237),x=t(256),C=t.n(x),k=t(257),U=t.n(k),P=t(230),A=t(233),D=t(251),F=t(183),M=t(235),B=t(250),z=t(243),R=w.b.div.withConfig({componentId:"sc-1e63g4f-0"})(["display:flex;max-width:450px;width:100%;margin:0 auto;padding:35px 50px;background:#fff;border-radius:8px;box-shadow:0 0 30px rgba(0,0,0,0.05);.submit-container{margin:30px auto 0;text-align:center;}.MuiFormHelperText-root{position:absolute;bottom:-20px;}.password-helper{color:rgb(184,107,0);&.Mui-error{color:rgb(244,67,54);}}@media (max-width:500px){padding:20px 30px;.password-helper{bottom:-30px;}}"]),I=Object(y.a)(function(e){return{formField:{margin:"0 auto 25px"},submitBtn:{width:"200px"},adornmentBtn:{padding:0}}}),T=function(e){var a=e.onSubmit,t=e.submitDisabled,r=e.onChange,s=e.role,l=e.userName,o=e.email,c=e.fullName,u=e.password,m=e.errors,d=I(),p=n.a.useState(!1),b=Object(O.a)(p,2),f=b[0],h=b[1];return n.a.createElement(R,null,n.a.createElement("form",{onSubmit:a},n.a.createElement(N.a,{fullWidth:!0,className:d.formField},n.a.createElement(z.a,{displayEmpty:!0,name:"role",value:s,onChange:r},n.a.createElement(B.a,{value:i.a.Regular},"Regular"),n.a.createElement(B.a,{value:i.a.Moderator},"Moderator"),n.a.createElement(B.a,{value:i.a.Admin},"Admin"))),n.a.createElement(N.a,{fullWidth:!0,className:d.formField,error:!!m.userName},n.a.createElement(D.a,null,"Username"),n.a.createElement(A.a,{name:"userName",value:l,onChange:r}),!!m.userName&&n.a.createElement(M.a,null,m.userName)),n.a.createElement(N.a,{fullWidth:!0,className:d.formField,error:!!m.email},n.a.createElement(D.a,null,"Email"),n.a.createElement(A.a,{type:"email",name:"email",value:o,onChange:r}),!!m.email&&n.a.createElement(M.a,null,m.email)),n.a.createElement(N.a,{fullWidth:!0,className:d.formField},n.a.createElement(j.a,{label:"Full name",name:"fullName",value:c,onChange:r})),n.a.createElement(N.a,{fullWidth:!0,className:d.formField,error:!!m.password},n.a.createElement(D.a,null,"Password"),n.a.createElement(A.a,{type:f?"text":"password",name:"password",value:u,onChange:r,autoComplete:"current-password",endAdornment:n.a.createElement(S.a,{position:"end"},n.a.createElement(P.a,{"aria-label":"Toggle password visibility",className:d.adornmentBtn,onClick:function(){return h(!f)},onMouseDown:function(e){return e.preventDefault()}},f?n.a.createElement(C.a,null):n.a.createElement(U.a,null)))}),n.a.createElement(M.a,{classes:{root:"password-helper"}},"Password must contain [a-z, A-Z, 0-9] with length of 8 ~ 20")),n.a.createElement("div",{className:"submit-container"},n.a.createElement(F.a,{variant:"outlined",color:"primary",type:"submit",className:d.submitBtn,disabled:t},"SUBMIT"))))};function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function Z(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(t,!0).forEach(function(a){Object(c.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var L=function(e){function a(){var e,t;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(n)))).state={isBusy:!1,role:i.a.Regular,userName:"",email:"",fullName:"",password:"",errors:{}},t.handleCreate=function(e){e.preventDefault();var a=Object(E.a)({role:!0,userName:!0,email:!0,password:!0})(t.state),r=a.isValid,n=a.errors;r?t.props.createUser(Z({},Object(h.a)(["role","userName","email","fullName","password"])(t.state),{onSuccess:t.handleSuccess,onFailure:t.handleFailure})):t.setState({errors:n})},t.handleSuccess=function(){t.props.history.push(i.b.Users),t.props.setSnackbar("Success")},t.handleFailure=function(e){t.setState({isBusy:!1},function(){t.props.setSnackbar(e.message||"Something went wrong")})},t.handleInputChange=function(e){var a=e.target,r=a.name,n=a.value;t.setState(function(e){var a;return a={},Object(c.a)(a,r,n),Object(c.a)(a,"errors",Z({},e.errors,Object(c.a)({},r,""))),a})},t}return Object(b.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.state,a=e.isBusy,t=Object(o.a)(e,["isBusy"]);return n.a.createElement(T,Object.assign({},t,{onChange:this.handleInputChange,onSubmit:this.handleCreate,submitDisabled:a}))}}]),a}(n.a.Component),V=Object(f.b)(null,{createUser:g.a,setSnackbar:v.b})(L),W=t(259),q=t(65),H=w.b.div.withConfig({componentId:"sc-1lh172v-0"})(["padding:20px 0 0;text-align:",";> svg{margin:150px auto 0;width:80px;height:80px;}"],function(e){return e.isBusy?"center":"initial"}),$=function(e){function a(){var e,t;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(n)))).state={isBusy:!0,user:null},t}return Object(b.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getUsers({id:this.props.match.params.id,onSuccess:function(a){return e.setState({isBusy:!1,user:a.data[0]})},onFailure:function(){return e.props.history.push(i.b.Users)}})}},{key:"render",value:function(){var e=this.state,a=e.isBusy,t=e.user;return a?n.a.createElement(H,{isBusy:!0},n.a.createElement(q.a,{delay:700})):n.a.createElement(H,null,n.a.createElement(W.a,t))}}]),a}(n.a.PureComponent),J=Object(f.b)(null,{getUsers:g.c})($);function Y(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function G(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Y(t,!0).forEach(function(a){Object(c.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var K=function(e){function a(){var e,t;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(n)))).state={isBusy:!0,role:i.a.Regular,userName:"",email:"",fullName:"",password:"",errors:{}},t.handleCreate=function(e){e.preventDefault();var a=Object(E.a)({role:!0,userName:!0,email:!!t.state.email,password:!!t.state.password})(t.state),r=a.isValid,n=a.errors;r?t.props.updateUser(G({},Object(h.a)(["role","userName","email","fullName","password"])(t.state),{id:t.props.match.params.id,onSuccess:t.handleSuccess,onFailure:t.handleFailure})):t.setState({errors:n})},t.handleSuccess=function(){t.props.history.push(i.b.Users),t.props.setSnackbar("Success")},t.handleFailure=function(e){t.setState({isBusy:!1},function(){t.props.setSnackbar(e.message||"Something went wrong")})},t.handleInputChange=function(e){var a=e.target,r=a.name,n=a.value;t.setState(function(e){var a;return a={},Object(c.a)(a,r,n),Object(c.a)(a,"errors",G({},e.errors,Object(c.a)({},r,""))),a})},t}return Object(b.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getUsers({id:this.props.match.params.id,onSuccess:function(a){e.setState(G({isBusy:!1},Object(h.a)(["userName","email","fullName","role"])(a.data[0])))},onFailure:function(a){e.props.history.push(i.b.Users),e.props.setSnackbar(a.message||"Something went wrong")}})}},{key:"render",value:function(){var e=this.state,a=e.isBusy,t=Object(o.a)(e,["isBusy"]);return n.a.createElement(T,Object.assign({},t,{onChange:this.handleInputChange,onSubmit:this.handleCreate,submitDisabled:a}))}}]),a}(n.a.Component),Q=Object(f.b)(null,{updateUser:g.d,getUsers:g.c,setSnackbar:v.b})(K),X=t(130),ee=function(e){function a(){var e,t;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(n)))).state={isBusy:!0,user:null},t}return Object(b.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getUsers({id:this.props.match.params.id,onSuccess:function(a){return e.setState({isBusy:!1,user:a.data[0]})},onFailure:function(a){e.props.history.push(i.b.Users),e.props.setSnackbar(a.message||"Something went wrong")}})}},{key:"render",value:function(){var e=this.state,a=e.isBusy,t=e.user;return a?n.a.createElement(q.a,{delay:700}):n.a.createElement(X.a,t)}}]),a}(n.a.PureComponent),ae=Object(f.b)(null,{getUsers:g.c,setSnackbar:v.b})(ee);a.default=function(){return n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:i.b.UserCreate,component:V}),n.a.createElement(s.b,{exact:!0,path:i.b.User,component:J}),n.a.createElement(s.b,{path:i.b.UserEdit,component:Q}),n.a.createElement(l.a,{allowed:[i.a.Admin],path:i.b.UserMeals,newPath:i.b.Users,component:ae}),n.a.createElement(s.a,{to:"/404"}))}}}]);
//# sourceMappingURL=User.ab39257b.chunk.js.map