{"version":3,"sources":["store/schemas.js","store/users/actions.js","components/Avatar.jsx","utils/parseNameInitials.js","components/User.jsx","store/users/selectors.js","containers/users/index.jsx"],"names":["usersScema","schema","Entity","idAttribute","USERS","USERS_ARRAY","createUser","params","CALL_API","types","ActionTypes","endpoint","method","body","pick","meta","getUsers","normalize","data","Schemas","updateUser","deleteUser","Wrapper","styled","div","Avatar","name","className","substring","toUpperCase","useStyles","makeStyles","anchorMenuItem","padding","menuAnchor","display","width","textAlign","textDecoration","color","connect","setSnackbar","id","_id","userName","email","fullName","dailyCaloriesTarget","userRole","role","onDelete","useRole","classes","React","useState","deleting","setDeleting","setMenuAnchor","title","aria-label","onClick","event","prevAnchor","currentTarget","keepMounted","anchorEl","open","onClose","ROLES","Admin","to","onSuccess","onFailure","errors","message","selectUsers","users","entities","userIds","map","Users","handleUserDelete","props","this","currentUser","user","ROUTES","UserCreate","User","key","PureComponent","state","auth"],"mappings":"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","file":"static/js/Users.a70346d6.chunk.js","sourcesContent":["import { schema } from 'normalizr';\n\nconst usersScema = new schema.Entity('users', {}, { idAttribute: '_id' });\n\nexport default {\n  USERS: usersScema,\n  USERS_ARRAY: [usersScema]\n};\n","import { pick } from 'ramda';\nimport { CALL_API } from '../middlewares/api';\nimport Schemas from '../schemas';\nimport * as ActionTypes from './types';\n\n/**\n * Create User\n */\nexport const createUser = params => ({\n  [CALL_API]: {\n    types: [\n      ActionTypes.CREATE_USER_REQUEST,\n      ActionTypes.CREATE_USER_SUCCESS,\n      ActionTypes.CREATE_USER_FAILURE\n    ],\n    endpoint: 'user',\n    method: 'POST',\n    body: pick(['userName', 'email', 'fullName', 'role', 'password'])(params || {}),\n    meta: pick(['onSuccess', 'onFailure'])(params || {})\n  }\n});\n\n/**\n * Get Users\n */\nexport const getUsers = params => ({\n  [CALL_API]: {\n    types: [\n      ActionTypes.GET_USERS_REQUEST,\n      ActionTypes.GET_USERS_SUCCESS,\n      ActionTypes.GET_USERS_FAILURE\n    ],\n    endpoint: 'users',\n    body: pick(['id'])(params || {}),\n    meta: pick(['onSuccess', 'onFailure'])(params || {}),\n    schema: params.normalize\n      ? {\n          data: Schemas.USERS_ARRAY\n        }\n      : null\n  },\n  normalize: params.normalize\n});\n\n/**\n * Update user\n */\nexport const updateUser = params => ({\n  [CALL_API]: {\n    types: [ActionTypes.UPDATE_REQUEST, ActionTypes.UPDATE_SUCCESS, ActionTypes.UPDATE_FAILURE],\n    endpoint: 'user',\n    method: 'PATCH',\n    body: pick(['id', 'userName', 'email', 'fullName', 'dailyCaloriesTarget', 'role', 'password'])(\n      params || {}\n    ),\n    meta: pick(['onSuccess', 'onFailure'])(params || {})\n  }\n});\n\n/**\n * Delete user\n */\nexport const deleteUser = params => ({\n  [CALL_API]: {\n    types: [ActionTypes.DELETE_REQUEST, ActionTypes.DELETE_SUCCESS, ActionTypes.DELETE_FAILURE],\n    endpoint: 'user',\n    method: 'DELETE',\n    body: pick(['id'])(params || {}),\n    meta: pick(['onSuccess', 'onFailure'])(params || {})\n  }\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport parseNameInitials from '../utils/parseNameInitials';\n\nconst Wrapper = styled.div`\n  width: 100px;\n  height: 100px;\n\n  .shadow {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background: rgba(0, 0, 0, 0.05);\n\n    > span {\n      font-size: 1.5rem;\n    }\n  }\n`;\n\nconst Avatar = ({ name, className }) => (\n  <Wrapper className={className || ''}>\n    <div className=\"shadow\">\n      {!!name ? <span>{parseNameInitials(name)}</span> : <AccountCircle />}\n    </div>\n  </Wrapper>\n);\n\nexport default Avatar;\n","export default fullName => (fullName || '').substring(0, 1).toUpperCase();\n","import React from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport { deleteUser } from '../store/users/actions';\nimport { setSnackbar } from '../store/ui/actions';\nimport { useRole } from '../providers/RoleProvider';\nimport Avatar from '../components/Avatar';\nimport { ROLES } from '../constants';\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  max-width: 100%;\n  width: 100%;\n  min-height: 50px;\n  margin: 10px auto;\n  padding: 8px 12px;\n  border-radius: 8px;\n  box-shadow: 0 0 7px rgba(0, 0, 0, 0.2);\n\n  .more-btns {\n    align-self: center;\n\n    > button {\n      outline: none;\n      border: 0;\n      background: none;\n      cursor: pointer;\n    }\n  }\n\n  .field {\n    position: relative;\n    overflow: hidden;\n    flex: 25%;\n    margin: 0 10px;\n    white-space: nowrap;\n\n    &.email {\n      flex: 33%;\n    }\n\n    span {\n      display: block;\n\n      &.field-label {\n        margin: 0 0 8px;\n        font-weight: bold;\n        color: rgba(0, 0, 0, 0.8);\n      }\n    }\n  }\n\n  .avatar {\n    width: 50px;\n    min-width: 50px;\n    height: 50px;\n  }\n\n  @media (max-width: 950px) {\n    display: block;\n    padding: 15px;\n\n    .field {\n      margin: 0 0 30px;\n      flex: unset;\n      white-space: normal;\n\n      .field-label {\n        margin: 0 0 2px;\n      }\n    }\n\n    .more-btns {\n      position: absolute;\n      top: 15px;\n      right: 15px;\n\n      i {\n        font-size: 26px;\n      }\n    }\n\n    .avatar {\n      margin: 0 0 35px;\n    }\n  }\n`;\n\nconst useStyles = makeStyles(() => ({\n  anchorMenuItem: {\n    padding: 0\n  },\n  menuAnchor: {\n    display: 'block',\n    width: '100%',\n    padding: '10px 0',\n    textAlign: 'center',\n    textDecoration: 'none',\n    color: '#000'\n  }\n}));\n\nconst User = ({\n  _id: id,\n  className,\n  userName,\n  email,\n  fullName,\n  dailyCaloriesTarget,\n  role: userRole,\n  onDelete,\n  deleteUser,\n  setSnackbar\n}) => {\n  const role = useRole();\n  const classes = useStyles();\n  const [deleting, setDeleting] = React.useState(false);\n  const [menuAnchor, setMenuAnchor] = React.useState(null);\n\n  const handleMoreClick = event => {\n    setMenuAnchor(prevAnchor => (prevAnchor ? null : event.currentTarget));\n  };\n\n  const handleClose = () => {\n    setMenuAnchor(null);\n  };\n\n  const handleDelete = () => {\n    if (!deleting) {\n      setDeleting(true);\n\n      deleteUser({\n        id,\n        onSuccess: onDelete,\n        onFailure: errors => {\n          setDeleting(false);\n          setSnackbar(errors.message || 'Something went wrong');\n        }\n      });\n    }\n  };\n\n  return (\n    <Wrapper className={className || ''}>\n      <Avatar name={userName} className=\"avatar\" />\n\n      <div className=\"userName field\">\n        <span className=\"field-label\">Username</span>\n        <span className=\"field-value\" title={userName}>\n          {userName}\n        </span>\n      </div>\n\n      <div className=\"email field\">\n        <span className=\"field-label\">Email</span>\n        <span className=\"field-value\" title={email}>\n          {email}\n        </span>\n      </div>\n\n      <div className=\"fullName field\">\n        <span className=\"field-label\">Full name</span>\n        <span className=\"field-value\" title={fullName}>\n          {fullName}\n        </span>\n      </div>\n\n      <div className=\"dailyCaloriesTarget field\">\n        <span className=\"field-label\">Exp. Calories / Day</span>\n        <span className=\"field-value\" title={dailyCaloriesTarget}>\n          {dailyCaloriesTarget}\n        </span>\n      </div>\n\n      <div className=\"role field\">\n        <span className=\"field-label\">Role</span>\n        <span className=\"field-value\" title={userRole}>\n          {userRole}\n        </span>\n      </div>\n\n      <div className=\"more-btns\">\n        <button aria-label=\"More\" onClick={handleMoreClick}>\n          <i className=\"material-icons\">expand_more</i>\n        </button>\n        <Menu\n          id={`user-${id}-menu`}\n          keepMounted\n          anchorEl={menuAnchor}\n          open={!!menuAnchor}\n          onClose={handleClose}\n        >\n          {role === ROLES.Admin && (\n            <MenuItem className={classes.anchorMenuItem}>\n              <Link to={`/user/${id}/meals`} className={classes.menuAnchor}>\n                MEALS\n              </Link>\n            </MenuItem>\n          )}\n          <MenuItem className={classes.anchorMenuItem}>\n            <Link to={`/user/${id}/edit`} className={classes.menuAnchor}>\n              EDIT\n            </Link>\n          </MenuItem>\n          <MenuItem onClick={handleDelete}>DELETE</MenuItem>\n        </Menu>\n      </div>\n    </Wrapper>\n  );\n};\n\nexport default connect(\n  null,\n  { deleteUser, setSnackbar }\n)(User);\n","export const selectUsers = ({ users, entities }) =>\n  (users.userIds || []).map(id => entities.users[id]);\n\nexport const selectUser = id => ({ entities }) => (entities.users && entities.users[id]) || null;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport User from '../../components/User';\nimport { getUsers } from '../../store/users/actions';\nimport { selectUsers } from '../../store/users/selectors';\nimport { ROUTES } from '../../constants';\n\nconst Wrapper = styled.div`\n  .user-create-anchor {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    min-height: 50px;\n    margin: 10px auto;\n    padding: 8px 12px;\n    border-radius: 8px;\n    box-shadow: 0 0 7px rgba(0, 0, 0, 0.2);\n  }\n`;\n\nclass Users extends React.PureComponent {\n  componentDidMount() {\n    this.props.getUsers({ normalize: true });\n  }\n\n  handleUserDelete = () => this.props.getUsers({ normalize: true });\n\n  render() {\n    const { users, user: currentUser } = this.props;\n\n    return (\n      <Wrapper>\n        <Link to={ROUTES.UserCreate} className=\"user-create-anchor\">\n          <AddIcon />\n        </Link>\n        {users.map(user =>\n          user._id !== currentUser._id ? (\n            <User key={user._id} {...user} onDelete={this.handleUserDelete} />\n          ) : null\n        )}\n      </Wrapper>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({ users: selectUsers(state), user: state.auth.user });\n\nexport default connect(\n  mapStateToProps,\n  { getUsers }\n)(Users);\n"],"sourceRoot":""}